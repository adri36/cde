<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
<!-- Generic stuff --><!-- Framework CSS --><!--[if lt IE 8]><link rel="stylesheet" href="../pentaho-cdf/js/blueprint/ie.css" type="text/css" media="screen, projection"><![endif]--><!-- CDF --><link rel="stylesheet" href="../pentaho-cdf/js/autobox/jquery.ui.autobox.css" type="text/css">
<link rel="stylesheet" href="../pentaho-cdf/js/blueprint/screen.css" type="text/css">
<link rel="stylesheet" href="../pentaho-cdf/js/fancybox/jquery.fancybox-1.3.4.css" type="text/css">
<!--<link rel="stylesheet" href="css/about.css" type="text/css"/> --><meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=8">
<title>Webdetails CDE</title>
<!--@HEADER@-->
</head>
<body>
<div class="outside">
  <div class="container">
    <div class="cdfdd-toolbar-logo"></div>
    <div class="cdfdd-toolbar span-24 last">
    <div id = "header" class="span-11 cdfdd-main prepend-2">
      <div id = "headerLinks" class="headerLinks">
          
          
        <div class="headerButton">
          <a onclick="cdfdd.newDashboard()" class="headerButton">
            New
          </a>
        </div>
        <div class="headerButton">
          <a onclick="cdfdd.save()" class="headerButton">
            Save
          </a>
        </div>
        <div class="headerButton">
          <a href="#" class="headerButton" id="SaveAs" style="width: 90px;">Save as...<div class="buttonImage"></div>
          <ul class="controlOptions" id="SaveAsOptions" style="z-index: 10;">
            <li class="item popupIcon" onclick="cdfdd.saveAs()">Save as Dashboard</li>
            <li class="item popupIcon" onclick="cdfdd.saveAsWidget()">Save as Widget</li>
          </ul>
          </a>
        </div>
        <div class="headerButton">
          <a id="cdfdd-main-Reload" href="javascript:Panel.enableThisButton(this);cdfdd.reload()" class="headerButton">
            Reload
          </a>
        </div>
        <div class="headerButton">
          <a onclick="cdfdd.saveSettings()" class="headerButton">
            Settings
          </a>
        </div>
      </div>
    </div>
      <!---->
      <!-- Modes -->
      <div class="span-9 cdfdd-modes">
        <a onclick="Panel.enableThisButton(this);cdfdd.layout.switchTo()" class="tooltip">
          <img src="images/NAV/layout.png"
              onmouseover="Panel.setHover(this)"
              onmouseout="Panel.unsetHover(this)"
          >
        </a>
        <a onclick="Panel.enableThisButton(this);cdfdd.components.switchTo()" class="tooltip">
          <img src="images/NAV/Xcomponents.png"
              onmouseover="Panel.setHover(this)"
              onmouseout="Panel.unsetHover(this)"
          >
        </a>
        <a onclick="Panel.enableThisButton(this);cdfdd.datasources.switchTo()" class="tooltip">
          <img src="images/NAV/Xdatasources.png"
              onmouseover="Panel.setHover(this)"
              onmouseout="Panel.unsetHover(this)"
          >
      </a>
      </div>
      <div class="span-2 cdfdd-preview last last">
        <a onclick="cdfdd.previewMode()" class="tooltip">
          <img src="images/NAV/Xpreview.png"
              onmouseover="Panel.setHover(this)"
              onmouseout="Panel.unsetHover(this)"
          >
        </a>
      </div>
    </div>
    <hr class="hr-hidden">
    <div id="cdfdd-panels" class="span-24 round last"></div>
    <hr class="hr-hidden">
    <div class="span-21">&nbsp;</div>
    
    <div id="footer" class="footer span-24">
    
      <div class="span-3 button cdfdd-about last" onclick="cdfdd.footerMode('about.fancybox')"> About </div>
      <div class="span-3 button cdfdd-documentation last" onclick="cdfdd.footerMode('documentation.fancybox')"> Documentation  </div>
      
      <a class="webdetailsLogo" href="http://www.webdetails.pt" border="0"> <img src="images/NAV/logo_webdetails.png"></a>

    </div>
  </div>
</div>

<div id="wizardDialog" class="jqmWindow" style="display: none"> </div>
<div id="keyboard_shortcuts_help" style="display: none;">
  <div style="margin: 2em;">
    <h4>Keyboard Shortcuts</h4>
    <p>
      <span>help (this) </span>?
    </p>
    <p>
      <span>switch to Layout </span>1
    </p>
    <p>
      <span>switch to Components </span>2
    </p>
    <p>
      <span>switch to Datasources </span>3
    </p>
    <p>
      <span>configure CGG</span>&lt;Shift&gt; + g
    </p>
    <p>
      <span>save</span>&lt;Shift&gt; + s
    </p>
    <p>
      <span>preview</span>&lt;Shift&gt; + p
    </p>
    <p>
      <span>validate components (testing)</span>&lt;Shift&gt; + v
    </p>
    <span><span colspan="2" style="text-align: right;">
    <a href="#" onclick="cdfdd.toggleHelp()" style="color: #0091F6; font-weight: normal;">close</a></span>
    </span>
  </div>
</div>
<script language="javascript" type="text/javascript">
      var CDFDDFileName = '@FILENAME@';
      var CDFDDServerUrl = '@SERVERURL@';
      var CDFDDDataUrl = "cdf-structure.js";
      var WEB_CONTEXT_BASE = CDFDDServerUrl + "../../";
    </script><script type="text/javascript" src="../pentaho-cdf/js/json.js"></script><!-- CDF files -->
 @CDF@ @STYLES@ 
<!-- CDF-DD files -->
 @SCRIPTS@
<script type="text/javascript" src="getcomponentdefinitions"></script>
<!-- ACE -->
<script language="javascript" type="text/javascript" src="getJsResource/resources/ace/src/ace.js"></script>
<script language="javascript" type="text/javascript" src="getJsResource/resources/ace/src/mode-javascript.js"></script>
<script language="javascript" type="text/javascript" src="getJsResource/resources/ace/src/mode-css.js"></script>
<script language="javascript" type="text/javascript" src="getJsResource/resources/ace/src/mode-xml.js"></script>
<script language="javascript" type="text/javascript" src="getJsResource/resources/ace/src/mode-html.js"></script>
<script language="javascript" type="text/javascript" src="getJsResource/resources/ace/src/theme-twilight.js"></script>
<script language="javascript" type="text/javascript" src="getJsResource/resources/ace/src/theme-eclipse.js"></script>
<script language="javascript" type="text/javascript" src="getJsResource/js/cdf-dd-aceWrapper.js"></script>




<!-- Layout formats -->
<script type="text/javascript">

var controlOptionsRepositioning = function(){
  var $controlOptions = $(".controlOptions");
  var $controlParent;
  for(var i=0;i<$controlOptions.size();i++){
    var $controlButton = $("#"+$controlOptions[i].id);
    
    $controlParent = $controlButton.parent();
    var xOffset = $controlParent.offset().left;
    var yOffset = $controlParent.offset().top;

    $controlButton.offset({top: yOffset+20,left: xOffset-($controlButton.width()/2)+($controlParent.width()/2)});
  }

}

function refitEditor() {
  for (i=1; i <25; i++) {
    if ($('.span-' + i).css) {
      $('.span-' + i).css({
        "min-width": 40 * i -10 + "px",
        width: ((4 * i - 1) * 100 / 95) + "%" 
      });
    }
  }
  $('.container').css({width:"100%"});

  controlOptionsRepositioning();

};

$(".controlOptions").click(function(evt){
  cdfdd.savePulldown(this,evt);
});
$( function(){
    $(".round").corner();                    
    $(window).resize(function() {refitEditor();});      
    refitEditor();
            
}) ;



var saveAsControlOptions = function(){
    $('#SaveAs').click(function(event) {
      event.stopPropagation();
      if(!($("#SaveAsOptions").is(':visible'))){
        var divWidth = $('#header').width();
        var leftSpace = (150-divWidth)/2;
        $('#SaveAsOptions').css({'display':'block', 'width':'170px', 'left':-leftSpace});
        $('#SaveAs').addClass('linkActive');
      } else {
        $('#SaveAsOptions').css('display','none');
        $('#SaveAs').removeClass('linkActive');
      }
      controlOptionsRepositioning();
    });
}

$('body').click(function(){
  $('#SaveAsOptions').css('display','none');
  $('#SaveAs').removeClass('linkActive');
});

$(document).ready(function() {
    saveAsControlOptions();
    var popupActive = false;
    $('#popupExample, #commitTrack').click(function() {
      if(popupActive == false) {
        $('#popupExample1').css({'display':'block'});
        $('#SaveAsOptions').css('display','none');
        $('#SaveAs').removeClass('linkActive');
        versionControlActive = false;
        popupActive = true;
      } else {
        $('#popupExample1').css({'display':'none'});
        popupActive = false;
      }
    });
    
    var saveActive = false;
    $('#saveAs').click(function() {
      if(saveActive == false) {
        $('#popupSave').css({'display':'block'});
        saveActive = true;
      } else {
        $('#popupSave').css({'display':'none'});
        saveActive = false;
      }
    });
    
    $('.popup .closePopup, .popup .button#cancel').click(function() {
      $('.popup').css({'display':'none'});
      popupActive = false;
      saveActive = false;
    });
  });







var initPlugins = function (result) {


  result.map(function(plugin){
    $.getScript("../"+plugin.pluginId+plugin.jsPath)
  });
}


$.ajax({
  url : "getCDEplugins",
  dataType: 'json',
  data: [],
  success : initPlugins
});

</script>
</body>
</html>
    